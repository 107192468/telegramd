<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="user_pts_updates">
    <operation name="Insert">
        <sql>
            INSERT INTO user_pts_updates
                (user_id, pts, peer_type, peer_id, update_type, message_box_id, max_message_box_id, date2)
            VALUES
                (:user_id, :pts, :peer_type, :peer_id, :update_type, :message_box_id, :max_message_box_id, :date2)
        </sql>
    </operation>

    <operation name="SelectLastPtsByUserId">
        <sql>
            SELECT pts FROM user_pts_updates WHERE user_id = :user_id ORDER BY pts DESC LIMIT 1
        </sql>
    </operation>

    <operation name="SelectByGtPts" result_set="list">
        <sql>
            SELECT
                user_id, pts, peer_type, peer_id, update_type, message_box_id, max_message_box_id, date2
            FROM
                user_pts_updates
            WHERE
                user_id = :user_id AND pts > :pts ORDER BY pts
        </sql>
    </operation>
</table>
